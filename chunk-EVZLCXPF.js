import{d as S}from"./chunk-BUERT3MI.js";import{a as k,b as V,c as T,d as E,e as N,f as I,g as D,h as z,i as L}from"./chunk-4Q4CX3CC.js";import{$a as x,Da as _,Db as R,Ha as v,Ra as u,Sa as f,Wa as y,Xa as n,Y as m,Ya as o,Z as g,_a as C,ab as d,cb as r,d as b,eb as w,ga as p,gb as P,hb as M,ib as h,ua as s,zb as O}from"./chunk-JIKRBGP3.js";function F(t,a){if(t&1&&(n(0,"div",9),r(1),o()),t&2){let e=d(2);s(),w(" ",e.errorMessage()," ")}}function j(t,a){if(t&1&&(n(0,"div",10),r(1),o()),t&2){let e=d(2);s(),w(" ",e.successMessage()," ")}}function q(t,a){if(t&1){let e=C();n(0,"form",3),x("ngSubmit",function(){m(e);let i=d();return g(i.resetPassword())}),n(1,"div",4)(2,"label",5),r(3,"New Password"),o(),n(4,"input",6),h("ngModelChange",function(i){m(e);let l=d();return M(l.newPassword,i)||(l.newPassword=i),g(i)}),o()(),n(5,"div",4)(6,"label",7),r(7,"Confirm Password"),o(),n(8,"input",8),h("ngModelChange",function(i){m(e);let l=d();return M(l.confirmPassword,i)||(l.confirmPassword=i),g(i)}),o()(),u(9,F,2,1,"div",9),u(10,j,2,1,"div",10),n(11,"button",11),r(12),o()()}if(t&2){let e=d();s(4),P("ngModel",e.newPassword),s(4),P("ngModel",e.confirmPassword),s(),f(e.errorMessage()?9:-1),s(),f(e.successMessage()?10:-1),s(),y("disabled",e.isResetting()),s(),w(" ",e.isResetting()?"Resetting...":"Reset Password"," ")}}function B(t,a){if(t&1){let e=C();n(0,"div",9),r(1," Invalid or expired password reset link. "),o(),n(2,"button",12),x("click",function(){m(e);let i=d();return g(i.goToLogin())}),r(3," Go to Login "),o()}}var W=class t{constructor(a,e){this.supabase=a;this.router=e}newPassword="";confirmPassword="";errorMessage=p("");successMessage=p("");isResetting=p(!1);isValidToken=p(!1);ngOnInit(){return b(this,null,function*(){(yield this.supabase.getSession())?this.isValidToken.set(!0):this.router.navigate(["/"])})}resetPassword(){return b(this,null,function*(){if(this.errorMessage.set(""),this.successMessage.set(""),this.newPassword.length<6){this.errorMessage.set("Password must be at least 6 characters long.");return}if(this.newPassword!==this.confirmPassword){this.errorMessage.set("Passwords do not match.");return}this.isResetting.set(!0);try{yield this.supabase.updatePassword(this.newPassword),this.successMessage.set("Password reset successfully! Redirecting to login..."),setTimeout(()=>{this.router.navigate(["/admin/login"])},2e3)}catch(a){this.errorMessage.set(a.message||"Failed to reset password. Please try again.")}finally{this.isResetting.set(!1)}})}goToLogin(){this.router.navigate(["/admin/login"])}static \u0275fac=function(e){return new(e||t)(_(R),_(S))};static \u0275cmp=v({type:t,selectors:[["app-reset-password"]],decls:8,vars:1,consts:[[1,"reset-container"],[1,"reset-box"],[1,"subtitle"],[3,"ngSubmit"],[1,"form-group"],["for","password"],["type","password","id","password","name","password","placeholder","Enter new password","minlength","6","required","",3,"ngModelChange","ngModel"],["for","confirmPassword"],["type","password","id","confirmPassword","name","confirmPassword","placeholder","Confirm new password","required","",3,"ngModelChange","ngModel"],[1,"error-message"],[1,"success-message"],["type","submit",1,"reset-btn",3,"disabled"],[1,"back-btn",3,"click"]],template:function(e,c){e&1&&(n(0,"div",0)(1,"div",1)(2,"h1"),r(3,"Reset Password"),o(),n(4,"p",2),r(5,"Enter your new password"),o(),u(6,q,13,6,"form")(7,B,4,0),o()()),e&2&&(s(6),f(c.isValidToken()?6:7))},dependencies:[O,L,I,k,V,T,D,z,N,E],styles:[".reset-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#1a1a1a,#2d2d2d);padding:2rem}.reset-box[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:3rem;max-width:400px;width:100%;box-shadow:0 10px 40px #0000004d}.reset-box[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;font-weight:800;margin:0 0 .5rem;color:#111827;text-align:center}.reset-box[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{text-align:center;color:#6b7280;margin-bottom:2rem;font-weight:500}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:700;margin-bottom:.5rem;color:#111827;font-size:.9rem;letter-spacing:.3px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.875rem;border:2px solid #d1d5db;border-radius:6px;font-family:inherit;font-size:1rem;transition:all .2s}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#111827;background:#f9fafb}.error-message[_ngcontent-%COMP%]{background:#fee2e2;border:2px solid #ef4444;color:#991b1b;padding:.875rem;border-radius:6px;margin-bottom:1rem;font-weight:600;font-size:.9rem}.success-message[_ngcontent-%COMP%]{background:#d1fae5;border:2px solid #10b981;color:#065f46;padding:.875rem;border-radius:6px;margin-bottom:1rem;font-weight:600;font-size:.9rem}.reset-btn[_ngcontent-%COMP%], .back-btn[_ngcontent-%COMP%]{width:100%;border:none;padding:1rem;font-weight:700;cursor:pointer;border-radius:6px;font-size:1rem;letter-spacing:.5px;transition:all .2s}.reset-btn[_ngcontent-%COMP%]{background:#111827;color:#fff;margin-bottom:1rem}.reset-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#374151}.reset-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.back-btn[_ngcontent-%COMP%]{background:transparent;color:#6b7280;border:2px solid #d1d5db}.back-btn[_ngcontent-%COMP%]:hover{background:#f9fafb;color:#111827;border-color:#111827}@media (max-width: 480px){.reset-box[_ngcontent-%COMP%]{padding:2rem 1.5rem}}"]})};export{W as ResetPasswordComponent};
